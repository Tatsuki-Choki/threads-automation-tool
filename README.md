# Threads Automation Tool

Threads（Meta社のSNS）の投稿自動化ツールです。Google Apps Script (GAS) を使用して、投稿の予約、リプライの自動返信、統計情報の取得などを行います。

## 主な機能

- 📅 **予約投稿**: 指定した日時に自動投稿
- 🔄 **自動返信**: キーワードに基づく自動リプライ
- 📊 **統計情報**: 投稿やリプライの統計を取得
- 🎥 **動画投稿**: MP4/MOV形式の動画投稿に対応
- 🖼️ **画像投稿**: 複数画像（最大10枚）の投稿に対応
- 🌲 **ツリー投稿**: 連続した関連投稿の作成

## 動画投稿機能

### 対応フォーマット

Threads APIの仕様に基づき、以下の動画形式をサポートしています：

- **対応コンテナ**: MOV、MP4（MPEG-4 Part 14）
- **音声コーデック**: AAC、最大48kHz、1-2チャンネル
- **動画コーデック**: HEVC または H264
- **フレームレート**: 23-60 FPS
- **最大解像度**: 1920ピクセル（幅）
- **推奨アスペクト比**: 9:16
- **最大動画長**: 300秒（5分）
- **最大ファイルサイズ**: 1GB

### 技術仕様

- プログレッシブスキャン
- Closed GOP
- クロマサブサンプリング 4:2:0
- 最大ビデオビットレート: 100 Mbps
- オーディオビットレート: 128 kbps

### 使用方法

1. **予約投稿シート**の「動画URL」列に動画のURLを入力
2. 動画は**公開サーバー**上に配置する必要があります
3. Google Driveの動画は直接投稿できない可能性があるため、他のホスティングサービスの使用を推奨

### 注意事項

- **Google Drive**: 共有設定を「リンクを知っている全員」に変更する必要がありますが、それでも投稿に失敗する場合があります
- **YouTube URL**: 直接使用できません。動画ファイルの直接URLが必要です
- **処理時間**: 動画の処理には約30秒かかります

### テスト機能

動画投稿のテストには以下の関数を使用できます：

```javascript
// 動画投稿のバリデーションテスト
testVideoPost()

// 実際の動画投稿テスト
manualTestVideoPost('https://example.com/video.mp4', 'テスト投稿')
```

## セットアップ

1. Google Apps Scriptプロジェクトを作成
2. 必要なファイルをアップロード
3. Threads APIの認証情報を設定
4. 「クイックセットアップ」機能を実行

## セキュリティについて

⚠️ **重要：セキュリティ対策の実施が必要**

このプロジェクトには潜在的なセキュリティリスクが含まれています。以下の対策を必ず実施してください：

### 必須対策
1. **機密情報の保護**: すべてのトークン・シークレット・パスワードはScript Propertiesに保存してください
2. **Git履歴の清理**: `client_secret_*.json` などの機密ファイルがコミットされていないか確認し、必要に応じてGit履歴から削除してください
3. **Webhook署名検証**: 本番環境ではGoogle Apps Scriptの制限により完全な署名検証ができません。必要に応じてCloud Run/Functionsへの移設を検討してください
4. **パスワード設定**: Script Propertiesに `SHEET_PROTECTION_PASSWORD` を設定してください

### 設定手順
1. Google Apps Scriptエディタを開く
2. 「設定」→「Script Properties」を開く
3. 以下のキーと値を設定：
   - `SHEET_PROTECTION_PASSWORD`: 管理用パスワード
   - `WEBHOOK_VERIFY_TOKEN`: Webhook検証トークン
   - `APP_SECRET`: アプリシークレット

### 詳細
セキュリティに関する詳細な改善提案については `改善提案.md` を参照してください。

## ライセンス

このプロジェクトは個人使用を目的としています。商用利用の際はお問い合わせください。